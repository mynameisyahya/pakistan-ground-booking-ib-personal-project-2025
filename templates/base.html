<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Active Arena{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&display=swap" rel="stylesheet">
    
    <!-- üé® Custom styling with new color palette -->
    <style>
        :root{
            /* Modern Green & Black Theme */
            --primary-green: #1db954;    /* Spotify green */
            --primary-green-100: #0a1e12; /* Darkest green */
            --primary-green-200: #0e2e1c; /* Darker green */
            --primary-green-300: #123d26; /* Dark green */
            --primary-green-400: #174d30; /* Medium dark green */
            --primary-green-500: #1db954; /* Base green */
            --primary-green-600: #34c76a; /* Light green */
            --primary-green-700: #4bd580; /* Lighter green */
            --primary-green-800: #62e396; /* Very light green */
            --primary-green-900: #79f1ac; /* Lightest green */
            
            --dark-bg: #121212;         /* Dark background */
            --dark-bg-100: #000000;     /* Pure black */
            --dark-bg-200: #0a0a0a;     /* Slightly lighter black */
            --dark-bg-300: #141414;     /* Lighter dark */
            --dark-bg-400: #1a1a1a;     /* Even lighter dark */
            --dark-bg-500: #1e1e1e;     /* Base dark */
            --dark-bg-600: #2a2a2a;     /* Light dark */
            --dark-bg-700: #363636;     /* Lighter dark */
            --dark-bg-800: #424242;     /* Very light dark */
            --dark-bg-900: #4e4e4e;     /* Lightest dark */
            
            --accent-yellow: #ffd700;   /* Gold accent */
            --accent-yellow-100: #332b00; /* Dark gold */
            --accent-yellow-200: #665600; /* Medium dark gold */
            --accent-yellow-300: #998000; /* Medium gold */
            --accent-yellow-400: #ccab00; /* Light gold */
            --accent-yellow-500: #ffd700; /* Base gold */
            --accent-yellow-600: #ffde26; /* Lighter gold */
            --accent-yellow-700: #ffe44d; /* Very light gold */
            --accent-yellow-800: #ffeb80; /* Lightest gold */
            --accent-yellow-900: #fff2b3; /* Pale gold */
            
            --text-light: #ffffff;      /* White text */
            --text-muted: #b3b3b3;      /* Muted text */
            --text-dark: #121212;       /* Dark text */
            
            --success: #1db954;         /* Success green */
            --warning: #ffd700;         /* Warning yellow */
            --danger: #e74c3c;          /* Danger red */
            --info: #3498db;            /* Info blue */
            
            /* Semantic color mappings */
            --brand-1: var(--primary-green);
            --brand-2: var(--accent-yellow);
            --accent-1: var(--accent-yellow);
            --accent-2: var(--primary-green-600);
            --ink: var(--text-light);
            --muted: var(--text-muted);
            --paper: var(--dark-bg-500);
            --card: var(--dark-bg-400);
            --card-hover: var(--dark-bg-600);
        }
        body {
            min-height: 100vh;
            background: 
                radial-gradient(circle at 20% 30%, rgba(29, 185, 84, 0.1), transparent 30%),
                radial-gradient(circle at 80% 70%, rgba(255, 215, 0, 0.1), transparent 30%),
                linear-gradient(to bottom, var(--dark-bg-100), var(--dark-bg-300));
            color: var(--ink);
            font-family: 'Poppins', system-ui, -apple-system, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            line-height: 1.6;
        }
        .navbar {
            background: rgba(18, 18, 18, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(29, 185, 84, 0.2);
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.3);
        }
        .navbar-brand {
            font-weight: 900;
            letter-spacing: 1px;
            color: var(--primary-green) !important;
            font-size: 1.5rem;
            text-transform: uppercase;
            background: linear-gradient(90deg, var(--primary-green), var(--accent-yellow));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-fill-color: transparent;
        }
        .nav-link {
            color: var(--text-muted) !important;
            font-weight: 500;
            transition: all 0.3s ease;
            position: relative;
            padding: 0.5rem 1rem;
        }
        .nav-link:hover, .nav-link:focus {
            color: var(--primary-green) !important;
        }
        .nav-link:after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: 0;
            left: 50%;
            background: var(--primary-green);
            transition: all 0.3s ease;
            transform: translateX(-50%);
        }
        .nav-link:hover:after {
            width: 80%;
        }
        .btn-primary {
            background: var(--primary-green);
            border: none;
            color: var(--text-light);
            font-weight: 600;
            padding: 0.5rem 1.5rem;
            border-radius: 25px;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            box-shadow: 0 4px 15px rgba(29, 185, 84, 0.3);
        }
        .btn-primary:hover {
            background: var(--primary-green-600);
            color: var(--text-light);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(29, 185, 84, 0.4);
        }
        .btn-outline-primary {
            border: 2px solid var(--primary-green);
            color: var(--primary-green);
            background: transparent;
            font-weight: 600;
            padding: 0.5rem 1.5rem;
            border-radius: 25px;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .btn-outline-primary:hover {
            background: var(--primary-green);
            color: var(--text-light);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(29, 185, 84, 0.4);
        }
        .btn-outline-light{border-color:rgba(29,185,84,.3);color:var(--primary-green)}
        .btn-outline-light:hover{background:rgba(29,185,84,.1);color:var(--primary-green-600)}
        .btn-success{
            background: linear-gradient(135deg, var(--accent-yellow-500), var(--accent-yellow-400));
            border: 2px solid var(--accent-yellow-600);
            color: var(--dark-bg-100);
            font-weight: 800;
            padding: 0.75rem 1.5rem;
            border-radius: 12px;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 6px 25px rgba(255, 215, 0, 0.5), 0 0 20px rgba(255, 215, 0, 0.3);
            font-size: 1.05rem;
        }
        .btn-success:hover{
            background: linear-gradient(135deg, var(--accent-yellow-600), var(--accent-yellow-500));
            color: var(--dark-bg-100);
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 8px 35px rgba(255, 215, 0, 0.6), 0 0 30px rgba(255, 215, 0, 0.4);
            border-color: var(--accent-yellow-700);
        }
        .btn-danger{
            background: var(--danger);
            border: none;
            color: var(--text-light);
            font-weight: 600;
            padding: 0.5rem 1.5rem;
            border-radius: 25px;
            transition: all 0.3s ease;
        }
        .btn-danger:hover{
            background: #c0392b;
            color: var(--text-light);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(231, 76, 60, 0.4);
        }
        .app-container{max-width:1280px;padding:28px;margin:0 auto}
        .breadcrumb{display:none}
        .card-clean {
            background: var(--card);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
            overflow: hidden;
        }
        .card-clean:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(29, 185, 84, 0.2);
            border-color: rgba(29, 185, 84, 0.2);
        }
        .fade-in{animation:fade-in .35s ease both}
        @keyframes fade-in{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:none}}
    </style>

    {% block extra_css %}{% endblock %}
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-dark sticky-top">
        <div class="container">
            <a class="navbar-brand" href="{{ url_for('home') }}">Active Arena</a>
            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    {% if session.get('user_type') %}
                        <li class="nav-item">
                            <a class="nav-link" href="{{ url_for('grounds') }}">Browse Grounds</a>
                        </li>
                        {% if session.get('user_type') == 'host' %}
                            <li class="nav-item">
                                <a class="nav-link" href="{{ url_for('grounds_host') }}">My Grounds</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="{{ url_for('host_dashboard') }}">Host Dashboard</a>
                            </li>
                        {% endif %}
                        {% if session.get('user_type') == 'player' %}
                            <li class="nav-item">
                                <a class="nav-link" href="{{ url_for('player_requests') }}">Requests</a>
                            </li>
                        {% endif %}
                    {% endif %}
                </ul>
                
                <ul class="navbar-nav align-items-center gap-2">
                    {% if session.get('user_type') %}
                        <li class="nav-item d-none d-md-block text-muted small me-2">{{ session.get('user_type')|capitalize }}</li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown">üë§ {{ session.get('user_email', 'User') }}</a>
                            <ul class="dropdown-menu dropdown-menu-end">
                                <li><a class="dropdown-item" href="{{ url_for('grounds') }}">Browse grounds</a></li>
                                {% if session.get('user_type') == 'host' %}
                                <li><a class="dropdown-item" href="{{ url_for('host_dashboard') }}">Host dashboard</a></li>
                                {% else %}
                                <li><a class="dropdown-item" href="{{ url_for('player_requests') }}">My requests</a></li>
                                {% endif %}
                                <li><hr class="dropdown-divider"></li>
                                <li><a class="dropdown-item" href="{{ url_for('logout') }}">Logout</a></li>
                            </ul>
                        </li>
                    {% else %}
                        <li class="nav-item"><a class="btn btn-outline-light btn-sm" href="{{ url_for('login') }}">Log in</a></li>
                        <li class="nav-item d-none d-sm-block"><a class="btn btn-primary btn-sm" href="{{ url_for('signup_player') }}">üë§ Player</a></li>
                        <li class="nav-item d-none d-sm-block"><a class="btn btn-outline-primary btn-sm" href="{{ url_for('signup_host') }}">üèüÔ∏è Host</a></li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>

    <!-- Breadcrumbs -->
    {% block breadcrumbs %}{% endblock %}

    <!-- Flash Messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div class="container mt-3">
                {% for category, message in messages %}
                    <div class="alert alert-{{ 'danger' if category == 'danger' else 'success' }} alert-dismissible fade show" role="alert">
                        {{ message }}
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}

    <!-- Main Content -->
    <div class="container mt-4">
        {% block content %}{% endblock %}
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    {% block extra_js %}{% endblock %}


</body>
</html>
